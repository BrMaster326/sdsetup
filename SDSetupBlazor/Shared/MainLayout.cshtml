@inherits BlazorLayoutComponent
@inject Microsoft.AspNetCore.Blazor.Services.IUriHelper UriHelper
@inject HttpClient Http
<div class="main" style="min-height:100%;height:auto">
	<div class="ui menu stackable red">
		<a href="/" class="@(GetRelativePath().ToLower() == "" ? "active" : "") item"><img class="ui small image" src="/img/logo.png" style="display:block;margin-left:auto;margin-right:auto" /></a>
		<a href="/switch" class="@(GetRelativePath().ToLower() == "switch" ? "active" : "") item">Switch</a>
		<a href="/faq" class="@(GetRelativePath().ToLower() == "faq" ? "active" : "") item">FAQ</a>
		<a href="/credits" class="@(GetRelativePath().ToLower() == "credits" ? "active" : "") item">Credits</a>
		<div class="right menu">
			<a href="https://github.com/noahc3/SDSetup/issues" class="ui item">Issues</a>
			<a href="https://github.com/noahc3/SDSetup" class="ui item">Source</a>
		</div>
	</div>

	<div class="container" style="padding-bottom:1.5rem">
		<div class="content px-4">
			@Body
		</div>
	</div>
	<h5 style="text-align:center">Made by noahc3</h5>
	<h5 style="text-align:center">The Nintendo Switch name and logo are &#169; Nintendo. This site is in no way affiliated with Nintendo or any of it's partners.</h5>
	<h5 style="text-align:center;color:#d4d4d4;margin-bottom:1.5em">2018.08.18.03</h5>

</div>

@functions {

	//public static int browserCompatStatus = 0;

	//public static bool edgeConfirmed = false;

	protected override async Task OnInitAsync() {
		if (!G.initialized) {
			//JSRuntime.Current.InvokeAsync<int>("compat.interop_BrowserCompatCheck");
			G.packages = await Http.GetJsonAsync<Dictionary<string, Package>>("/manifest_v5b.json");
			G.Init();
			G.initialized = true;
			if (Pages.Switch.ForceUiRefresh != null) Pages.Switch.ForceUiRefresh();
			if (Pages.Credits.ForceUiUpdate != null) Pages.Credits.ForceUiUpdate();
		}
	}

	private string GetRelativePath() {
		return UriHelper.ToBaseRelativePath(UriHelper.GetBaseUri(), UriHelper.GetAbsoluteUri());
	}

	//[JSInvokable]
	//public static void BrowserNotCompatible(int val) {
	//	Console.WriteLine("Browser Compat Response: " + val);
	//	browserCompatStatus = val;
	//}
}